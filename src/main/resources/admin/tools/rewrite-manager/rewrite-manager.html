<html>
<head>
    <link rel="stylesheet" data-th-href="${portal.assetUrl({'_path=css/main.css'})}"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css"/>
<body>

<div class="redirect-manager">

    <div class="request-tester">
        <h2>Tester</h2>
        <input type="text" id="requestURL" name="requestURL" placeholder="https://url.to.test/here">
    </div>

    <div class="request-tester-result">
        <h2>Rules</h2>
        <div data-th-each="mapping,iterStat : ${mappings}" data-th-remove="tag">
            <div class="vhost" data-th-id="${'vhost_' + mapping.key}">
                <h2><span data-th-text="${mapping.key}"/></h2>

                <div class="rule-creator">
                    <label for="inputOrder">OrderId</label>
                    <input id="inputOrder" type="text" name="order"/>

                    <label for="inputFrom">From</label>
                    <input id="inputFrom" type="text" name="from"/>

                    <label for="inputTarget">Target</label>
                    <input id="inputTarget" type="text" name="target"/>

                    <label for="inputContextKey">Context</label>
                    <input id="inputContextKey" type="text" name="contextKey"/>

                    <button type="button" class="btnCreate" data-th-attr="data-context-key=${mapping.key}">Create rule</button>
                </div>

                <table id="myTable" class="table table-striped table-bordered" style="width:100%">
                    <thead class="thead-dark">
                    <tr>
                        <th>Order</th>
                        <th>From</th>
                        <th>To</th>
                        <th>External</th>
                        <th>Type</th>
                    </tr>
                    </thead>
                    <tbody>
                    <div data-th-each="rule,iterStat : ${mapping.value.rules}" data-th-remove="tag">
                        <tr data-th-id="${mapping.key + '_' + rule.order}">
                            <td data-th-text="${rule.order }"></td>
                            <td data-th-text="${rule.from}"></td>
                            <td data-th-text="${rule.target.path}"></td>
                            <td data-th-text="${rule.target.external}"></td>
                            <td data-th-text="${rule.type}"></td>
                        </tr>
                    </div>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" data-th-inline="javascript">
    /*<![CDATA[*/
    var CONFIG = {
        svcUrl: /*[[${svcUrl}]]*/
    };
    /*]]>*/
</script>

<script data-th-src="${portal.assetUrl({'_path=js/main.js'})}"></script>
</body>
</html>